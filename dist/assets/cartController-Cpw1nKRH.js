import{u as S,p as y}from"./searchController-D4HSFbdS.js";import{g as p}from"./addToCart-CzPefbFE.js";import{u as m,g as q}from"./getCartLocalStorage-Chpn1a7G.js";const g=c=>{const t=c.target.closest(".cartItem");if(t){const r=t.getAttribute("data-id");if(r){t.remove();const a=p().filter(l=>l.id!==Number(r));localStorage.setItem("productsLS",JSON.stringify(a)),S(a),m({subTotalEl:document.querySelector("#sub-total"),shippingEl:document.querySelector("#shipping-price"),grandTotalEl:document.querySelector(".total-amount")})}}},b=(c,t)=>{const r=t.target,n=r.closest(".cartItem")||document.querySelector(`#cartData${c}`);if(!n)return;const a=n.querySelector(".productQty");if(!a)return;let l=p();const u=l.find(d=>d.id===c);if(!u)return;let o=parseInt(a.value)||1;r.classList.contains("dec")&&o>1?o--:r.classList.contains("inc")&&o++,u.qty=o,u.price=u.basePrice*o,a.value=o,localStorage.setItem("productsLS",JSON.stringify(l));const i=n.querySelector(".pro-subtotal span");i&&(i.textContent=u.price.toFixed(2)),m({subTotalEl:document.querySelector("#sub-total"),shippingEl:document.querySelector("#shipping-price"),grandTotalEl:document.querySelector(".total-amount")})},f=p(),h=y.filter(c=>f.some(t=>t.id===c.id)),E=document.querySelector("#cartTemplate"),C=document.querySelector("#cartContainer"),I=()=>{h.forEach(c=>{const{id:t,productName:r,price:n,productImage:a}=c,l=q(t,n),u=l.qty,o=l.basePrice,i=o*u,d=l.selectedSize,e=E.content.cloneNode(!0);e.querySelector(".cartItem").setAttribute("id",`cartData${t}`),e.querySelector(".cartItem").setAttribute("data-id",t),e.querySelector(".pro-thumbnail img").src=a,e.querySelector(".pro-thumbnail img").alt=r,e.querySelector(".pro-title a").textContent=`${r} Size: ${d}`,e.querySelector(".pro-price span").textContent=o.toFixed(2),e.querySelector(".productQty").value=u,e.querySelector(".pro-subtotal span").textContent=i.toFixed(2),e.querySelector(".pro-title a").setAttribute("href",`product-details.html?id=${t}`),e.querySelector(".pro-thumbnail a").setAttribute("href",`product-details.html?id=${t}`),e.querySelector(".pro-qty").addEventListener("click",s=>{s.preventDefault(),b(t,s)}),e.querySelector(".pro-remove").addEventListener("click",s=>{s.preventDefault(),g(s)}),C.append(e)}),m({subTotalEl:document.querySelector("#sub-total"),shippingEl:document.querySelector("#shipping-price"),grandTotalEl:document.querySelector(".total-amount")})};I();
